{"version":3,"sources":["../../node_modules/tslib/tslib.es6.js","ng://ng-yandex-metrika/lib/ng-yandex-metrika.config.ts","ng://ng-yandex-metrika/lib/ng-yandex-metrika.service.ts","ng://ng-yandex-metrika/lib/ng-yandex-metrika-config-factories.ts","ng://ng-yandex-metrika/lib/ng-yandex-metrika.module.ts"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","this","n","v","op","TypeError","call","pop","length","push","DEFAULT_COUNTER_ID_AOT","InjectionToken","DEFAULT_COUNTER_ID","YANDEX_COUNTERS_CONFIGS_AOT","YANDEX_COUNTERS_CONFIGS","YandexCounterConfig","clickmap","trackLinks","accurateTrackBounce","webvisor","trackHash","ut","Metrika","injector","defaultCounterId","get","counterConfigs","positionToId","map","config","id","getCounterNameById","getCounterById","window","prototype","addFileExtension","extensions","counterPosition","counterIsLoaded","_a","console","warn","extLink","url","options","counter","promise","getCallbackPromise","file","getClientID","getCounterByPosition","reachGoal","setUserID","userId","userParams","params","replacePhones","notBounce","fireEvent","type","callback","ctx","error","error_9","hit","resolveWith","optionsCallback","counterId","getCounterIdByPosition","undefined","Injectable","args","providedIn","Injector","defaultCounterIdFactory","defaultCounter","defineDefaultId","configs","defaultId","Array","defaultCounterExists","i","countersFactory","createConfigs","Object","assign","appInitializerFactory","platformId","isPlatformBrowser","forEach","counterConfig","lazyConfigModifier","insertMetrika","bind","name","counterConfigs_1","__values","o","m","tslib_1.__values","counterConfigs_1_1","createCounter","document","getElementsByTagName","s","createElement","async","alternative","find","src","insetScriptTag","parentNode","insertBefore","opera","addEventListener","Ya","Metrika2","MetrikaModule","forRoot","ngModule","providers","provide","useValue","useFactory","deps","APP_INITIALIZER","PLATFORM_ID","multi","useClass","NgModule"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { InjectionToken } from '@angular/core';\n\nexport const DEFAULT_COUNTER_ID_AOT = new InjectionToken<number | string>('DEFAULT_COUNTER_ID_AOT');\nexport const DEFAULT_COUNTER_ID = new InjectionToken<number | string>('DEFAULT_COUNTER_ID');\nexport const YANDEX_COUNTERS_CONFIGS_AOT = new InjectionToken<YandexCounterConfig[]>('YANDEX_COUNTERS_CONFIGS_AOT');\nexport const YANDEX_COUNTERS_CONFIGS = new InjectionToken<YandexCounterConfig[]>('YANDEX_COUNTERS_CONFIGS');\n\ntype ConfigModifier = (CounterConfig) => void;\n\nexport interface CounterConfig {\n  id: string | number;\n  params?: any;\n  clickmap?: boolean;\n  trackLinks?: boolean;\n  accurateTrackBounce?: boolean;\n  webvisor?: boolean;\n  trackHash?: boolean;\n  ut?: string;\n  ecommerce?: string;\n  triggerEvent?: boolean;\n  alternative?: boolean;\n  lazyConfigModifier?: ConfigModifier;\n}\n\nexport class YandexCounterConfig  implements CounterConfig {\n  id: string | number;\n  params: any;\n  clickmap = true;\n  trackLinks = true;\n  accurateTrackBounce = true;\n  webvisor = false;\n  trackHash = true;\n  ut = 'noindex';\n  ecommerce?: string;\n  triggerEvent?: boolean;\n  alternative?: boolean;\n  lazyConfigModifier?: ConfigModifier;\n}\n","import { Injectable, Injector } from '@angular/core';\n\nimport { DEFAULT_COUNTER_ID, YANDEX_COUNTERS_CONFIGS, YandexCounterConfig } from './ng-yandex-metrika.config';\n\nexport interface CallbackOptions {\n  callback?: () => any;\n  ctx?: any;\n}\n\nexport interface CommonOptions extends CallbackOptions {\n  params?: any;\n  title?: any;\n}\n\nexport interface HitOptions extends CommonOptions {\n  referer?: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class Metrika {\n  private defaultCounterId: string;\n  private counterConfigs: YandexCounterConfig[];\n  private positionToId: any[];\n\n  static getCounterNameById(id: string | number) {\n    return `yaCounter${id}`;\n  }\n\n  static getCounterById(id: any) {\n    return window[Metrika.getCounterNameById(id)];\n  }\n\n  constructor(injector: Injector) {\n    this.defaultCounterId = injector.get<string>(DEFAULT_COUNTER_ID);\n    this.counterConfigs = injector.get<YandexCounterConfig[]>(YANDEX_COUNTERS_CONFIGS);\n    this.positionToId = this.counterConfigs.map(config => config.id);\n  }\n\n  async addFileExtension(extensions: string | string[], counterPosition?: number) {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      counter.addFileExtension(extensions);\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  async extLink(url: string, options: CommonOptions = {}, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      const promise = this.getCallbackPromise(options, url);\n      counter.extLink(url, options);\n      return promise;\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  async file(url: string, options: HitOptions = {}, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      const promise = this.getCallbackPromise(options, url);\n      counter.file(url, options);\n      return promise;\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  getClientID(counterPosition?: number): string {\n    const counter = this.getCounterByPosition(counterPosition);\n    if (counter && counter.reachGoal) {\n      return counter.getClientID();\n    }\n    console.warn('Counter is still loading');\n  }\n\n  async setUserID(userId: string, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      counter.setUserID(userId);\n      return {userId, counterPosition};\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  async userParams(params: any, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      counter.userParams(params);\n      return {params, counterPosition};\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  async params(params: any, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      counter.userParams(params);\n      return {params, counterPosition};\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  async replacePhones(counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      counter.replacePhones();\n      return {counterPosition};\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  async notBounce(options: CallbackOptions = {}, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      const promise = this.getCallbackPromise(options, options);\n      counter.notBounce(options);\n      return promise;\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  async fireEvent(type: string, options: CommonOptions = {}, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      const promise = this.getCallbackPromise(options, options);\n      counter.reachGoal(type, options.params, options.callback, options.ctx);\n      return promise;\n    } catch (error) {\n      console.error('error', error);\n      console.warn(`'Event with type [${type}] can\\'t be fired because counter is still loading'`)\n    }\n  }\n\n  async hit(url: string, options: HitOptions = {}, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      const promise = this.getCallbackPromise(options, options);\n      counter.hit(url, options);\n      return promise;\n    } catch (error) {\n      console.warn(`'Hit for page [${url}] can\\'t be fired because counter is still loading'`)\n    }\n  }\n\n  private getCallbackPromise(options: any, resolveWith: any) {\n    return new Promise((resolve, reject) => {\n      const optionsCallback = options.callback;\n      options.callback = function() {\n        if (optionsCallback) {\n          optionsCallback.call(this);\n        }\n        resolve(resolveWith);\n      };\n    });\n  }\n\n  private counterIsLoaded(counterPosition?: number): Promise<any> {\n    const counter = this.getCounterByPosition(counterPosition);\n    if (counter && counter.reachGoal) {\n      return Promise.resolve(counter);\n    } else {\n      return Promise.reject(counter);\n    }\n  }\n\n  private getCounterByPosition(counterPosition?: number) {\n    const counterId = this.getCounterIdByPosition(counterPosition);\n    return Metrika.getCounterById(counterId);\n  }\n\n  private getCounterIdByPosition(counterPosition: number) {\n    return (counterPosition === undefined)\n      ? this.defaultCounterId\n      : this.positionToId[counterPosition];\n  }\n}\n","declare var Ya: any;\n\nimport { isPlatformBrowser, isPlatformServer } from '@angular/common';\n\nimport { CounterConfig, YandexCounterConfig } from './ng-yandex-metrika.config';\n\nexport function defaultCounterIdFactory(counterConfigs: CounterConfig | CounterConfig[], defaultCounter?: number | string) {\n  return defineDefaultId(counterConfigs, defaultCounter);\n}\n\nexport function defineDefaultId(counterConfigs: CounterConfig | CounterConfig[], defaultCounter?: number | string) {\n  let configs: CounterConfig[];\n  if (counterConfigs instanceof Array) {\n    configs = counterConfigs;\n  } else {\n    configs = [counterConfigs as CounterConfig];\n  }\n  let defaultId: number | string;\n\n  if (!defaultCounter) {\n    defaultId = configs[0].id;\n  } else if (typeof defaultCounter === 'number' && defaultCounter < configs.length) {\n    defaultId = configs[defaultCounter].id;\n  } else {\n    defaultId = defaultCounter;\n  }\n\n  if (!defaultId) {\n    console.warn('You provided wrong counter id as a default:', defaultCounter);\n    return;\n  }\n\n  let defaultCounterExists = false;\n  let config;\n  for (let i = 0; i < configs.length; i++) {\n    config = configs[i];\n    if (!config.id) {\n      console.warn('You should provide counter id to use Yandex metrika counter', config);\n      continue;\n    }\n    if (config.id === defaultId) {\n      defaultCounterExists = true;\n    }\n  }\n\n  if (!defaultCounterExists) {\n    console.warn('You provided wrong counter id as a default:', defaultCounter);\n  }\n  return defaultId;\n}\n\nexport function countersFactory(configs: CounterConfig | CounterConfig[]) {\n  return createConfigs(configs);\n}\n\nexport function createConfigs(configs: CounterConfig | CounterConfig[]) {\n  let counterConfigs: CounterConfig[];\n  if (configs instanceof Array) {\n    counterConfigs = configs;\n  } else {\n    counterConfigs = [configs as CounterConfig];\n  }\n  return counterConfigs.map((config: CounterConfig) => Object.assign(new YandexCounterConfig(), config));\n}\n\nexport function appInitializerFactory(counterConfigs: YandexCounterConfig[], platformId: any) {\n  if (!isPlatformBrowser(platformId)) {\n    return () => 'none';\n  }\n  counterConfigs.forEach(counterConfig => {\n    if (counterConfig.lazyConfigModifier !== undefined) {\n      counterConfig.lazyConfigModifier(counterConfig);\n    }\n  });\n  return insertMetrika.bind(null, counterConfigs);\n}\n\nexport function insertMetrika(counterConfigs: YandexCounterConfig[]) {\n  const name = 'yandex_metrika_callbacks2';\n  window[name] = window[name] || [];\n  window[name].push(() => {\n    try {\n      for (const config of counterConfigs) {\n        createCounter(config);\n      }\n    } catch (e) {}\n  });\n\n  const n = document.getElementsByTagName('script')[0];\n  const s = document.createElement('script');\n  s.type = 'text/javascript';\n  s.async = true;\n\n  const alternative = counterConfigs.find(config => config.alternative);\n\n  if (alternative) {\n    s.src = 'https://cdn.jsdelivr.net/npm/yandex-metrica-watch/tag.js';\n  } else {\n    s.src = 'https://mc.yandex.ru/metrika/tag.js';\n  }\n\n  const insetScriptTag = () => n.parentNode.insertBefore(s, n);\n\n  if ((window as any).opera === '[object Opera]') {\n    document.addEventListener('DOMContentLoaded', insetScriptTag, false);\n  } else {\n    insetScriptTag();\n  }\n  return name;\n}\n\nexport function createCounter(config: YandexCounterConfig) {\n  window[getCounterNameById(config.id)] = new Ya.Metrika2(config);\n}\n\nexport function getCounterNameById(id: string | number) {\n  return `yaCounter${id}`;\n}\n","import { APP_INITIALIZER, Injector, ModuleWithProviders, NgModule } from '@angular/core';\nimport { PLATFORM_ID } from '@angular/core';\n\nimport { Metrika } from './ng-yandex-metrika.service';\nimport {\n  CounterConfig,\n  DEFAULT_COUNTER_ID,\n  DEFAULT_COUNTER_ID_AOT,\n  YANDEX_COUNTERS_CONFIGS,\n  YANDEX_COUNTERS_CONFIGS_AOT,\n} from './ng-yandex-metrika.config';\nimport { appInitializerFactory, countersFactory, defaultCounterIdFactory, } from './ng-yandex-metrika-config-factories';\n\n@NgModule({})\nexport class MetrikaModule {\n\n  static forRoot(configs: CounterConfig | CounterConfig[], defaultCounterId?: number | string): ModuleWithProviders {\n    return {\n      ngModule: MetrikaModule,\n      providers: [\n        {\n          provide: DEFAULT_COUNTER_ID_AOT,\n          useValue: defaultCounterId,\n        },\n        {\n          provide: YANDEX_COUNTERS_CONFIGS_AOT,\n          useValue: configs,\n        },\n        {\n          provide: DEFAULT_COUNTER_ID,\n          useFactory: defaultCounterIdFactory,\n          deps: [YANDEX_COUNTERS_CONFIGS_AOT, DEFAULT_COUNTER_ID_AOT],\n        },\n        {\n          provide: YANDEX_COUNTERS_CONFIGS,\n          useFactory: countersFactory,\n          deps: [YANDEX_COUNTERS_CONFIGS_AOT],\n        },\n        {\n          provide: APP_INITIALIZER,\n          useFactory: appInitializerFactory,\n          deps: [YANDEX_COUNTERS_CONFIGS, PLATFORM_ID],\n          multi: true,\n        },\n        {\n          provide: Metrika,\n          useClass: Metrika,\n          deps: [Injector, PLATFORM_ID],\n        }\n      ],\n    };\n  }\n}\n"]}