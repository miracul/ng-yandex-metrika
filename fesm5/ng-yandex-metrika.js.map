{"version":3,"file":"ng-yandex-metrika.js.map","sources":["ng://ng-yandex-metrika/lib/ng-yandex-metrika.config.ts","ng://ng-yandex-metrika/lib/ng-yandex-metrika.service.ts","ng://ng-yandex-metrika/lib/ng-yandex-metrika-config-factories.ts","ng://ng-yandex-metrika/lib/ng-yandex-metrika.module.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\n\nexport const DEFAULT_COUNTER_ID_AOT = new InjectionToken<number | string>('DEFAULT_COUNTER_ID_AOT');\nexport const DEFAULT_COUNTER_ID = new InjectionToken<number | string>('DEFAULT_COUNTER_ID');\nexport const YANDEX_COUNTERS_CONFIGS_AOT = new InjectionToken<YandexCounterConfig[]>('YANDEX_COUNTERS_CONFIGS_AOT');\nexport const YANDEX_COUNTERS_CONFIGS = new InjectionToken<YandexCounterConfig[]>('YANDEX_COUNTERS_CONFIGS');\n\ntype ConfigModifier = (CounterConfig) => YandexCounterConfig;\n\nexport interface CounterConfig {\n  id: string | number;\n  params?: any;\n  clickmap?: boolean;\n  trackLinks?: boolean;\n  accurateTrackBounce?: boolean;\n  webvisor?: boolean;\n  trackHash?: boolean;\n  ut?: string;\n  ecommerce?: string;\n  triggerEvent?: boolean;\n  alternative?: boolean;\n  lazyConfigModifier?: ConfigModifier;\n}\n\nexport class YandexCounterConfig  implements CounterConfig {\n  id: string | number;\n  params: any;\n  clickmap = true;\n  trackLinks = true;\n  accurateTrackBounce = true;\n  webvisor = false;\n  trackHash = true;\n  ut = 'noindex';\n  ecommerce?: string;\n  triggerEvent?: boolean;\n  alternative?: boolean;\n  lazyConfigModifier?: ConfigModifier;\n}\n","import { Injectable, Injector } from '@angular/core';\n\nimport { DEFAULT_COUNTER_ID, YANDEX_COUNTERS_CONFIGS, YandexCounterConfig } from './ng-yandex-metrika.config';\n\nexport interface CallbackOptions {\n  callback?: () => any;\n  ctx?: any;\n}\n\nexport interface CommonOptions extends CallbackOptions {\n  params?: any;\n  title?: any;\n}\n\nexport interface HitOptions extends CommonOptions {\n  referer?: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class Metrika {\n  private defaultCounterId: string;\n  private counterConfigs: YandexCounterConfig[];\n  private positionToId: any[];\n\n  static getCounterNameById(id: string | number) {\n    return `yaCounter${id}`;\n  }\n\n  static getCounterById(id: any) {\n    return window[Metrika.getCounterNameById(id)];\n  }\n\n  constructor(injector: Injector) {\n    this.defaultCounterId = injector.get<string>(DEFAULT_COUNTER_ID);\n    this.counterConfigs = injector.get<YandexCounterConfig[]>(YANDEX_COUNTERS_CONFIGS);\n    this.positionToId = this.counterConfigs.map(config => config.id);\n  }\n\n  async addFileExtension(extensions: string | string[], counterPosition?: number) {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      counter.addFileExtension(extensions);\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  async extLink(url: string, options: CommonOptions = {}, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      const promise = this.getCallbackPromise(options, url);\n      counter.extLink(url, options);\n      return promise;\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  async file(url: string, options: HitOptions = {}, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      const promise = this.getCallbackPromise(options, url);\n      counter.file(url, options);\n      return promise;\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  getClientID(counterPosition?: number): string {\n    const counter = this.getCounterByPosition(counterPosition);\n    if (counter && counter.reachGoal) {\n      return counter.getClientID();\n    }\n    console.warn('Counter is still loading');\n  }\n\n  async setUserID(userId: string, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      counter.setUserID(userId);\n      return {userId, counterPosition};\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  async userParams(params: any, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      counter.userParams(params);\n      return {params, counterPosition};\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  async params(params: any, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      counter.userParams(params);\n      return {params, counterPosition};\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  async replacePhones(counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      counter.replacePhones();\n      return {counterPosition};\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  async notBounce(options: CallbackOptions = {}, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      const promise = this.getCallbackPromise(options, options);\n      counter.notBounce(options);\n      return promise;\n    } catch (error) {\n      console.warn('Counter is still loading');\n    }\n  }\n\n  async fireEvent(type: string, options: CommonOptions = {}, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      const promise = this.getCallbackPromise(options, options);\n      counter.reachGoal(type, options.params, options.callback, options.ctx);\n      return promise;\n    } catch (error) {\n      console.error('error', error);\n      console.warn(`'Event with type [${type}] can\\'t be fired because counter is still loading'`)\n    }\n  }\n\n  async hit(url: string, options: HitOptions = {}, counterPosition?: number): Promise<any> {\n    try {\n      const counter = await this.counterIsLoaded(counterPosition);\n      const promise = this.getCallbackPromise(options, options);\n      counter.hit(url, options);\n      return promise;\n    } catch (error) {\n      console.warn(`'Hit for page [${url}] can\\'t be fired because counter is still loading'`)\n    }\n  }\n\n  private getCallbackPromise(options: any, resolveWith: any) {\n    return new Promise((resolve, reject) => {\n      const optionsCallback = options.callback;\n      options.callback = function() {\n        if (optionsCallback) {\n          optionsCallback.call(this);\n        }\n        resolve(resolveWith);\n      };\n    });\n  }\n\n  private counterIsLoaded(counterPosition?: number): Promise<any> {\n    const counter = this.getCounterByPosition(counterPosition);\n    if (counter && counter.reachGoal) {\n      return Promise.resolve(counter);\n    } else {\n      return Promise.reject(counter);\n    }\n  }\n\n  private getCounterByPosition(counterPosition?: number) {\n    const counterId = this.getCounterIdByPosition(counterPosition);\n    return Metrika.getCounterById(counterId);\n  }\n\n  private getCounterIdByPosition(counterPosition: number) {\n    return (counterPosition === undefined)\n      ? this.defaultCounterId\n      : this.positionToId[counterPosition];\n  }\n}\n","declare var Ya: any;\n\nimport { isPlatformBrowser, isPlatformServer } from '@angular/common';\n\nimport { CounterConfig, YandexCounterConfig } from './ng-yandex-metrika.config';\n\nexport function defaultCounterIdFactory(counterConfigs: CounterConfig | CounterConfig[], defaultCounter?: number | string) {\n  return defineDefaultId(counterConfigs, defaultCounter);\n}\n\nexport function defineDefaultId(counterConfigs: CounterConfig | CounterConfig[], defaultCounter?: number | string) {\n  let configs: CounterConfig[];\n  if (counterConfigs instanceof Array) {\n    configs = counterConfigs;\n  } else {\n    configs = [counterConfigs as CounterConfig];\n  }\n  let defaultId: number | string;\n\n  if (!defaultCounter) {\n    defaultId = configs[0].id;\n  } else if (typeof defaultCounter === 'number' && defaultCounter < configs.length) {\n    defaultId = configs[defaultCounter].id;\n  } else {\n    defaultId = defaultCounter;\n  }\n\n  if (!defaultId) {\n    console.warn('You provided wrong counter id as a default:', defaultCounter);\n    return;\n  }\n\n  let defaultCounterExists = false;\n  let config;\n  for (let i = 0; i < configs.length; i++) {\n    config = configs[i];\n    if (!config.id) {\n      console.warn('You should provide counter id to use Yandex metrika counter', config);\n      continue;\n    }\n    if (config.id === defaultId) {\n      defaultCounterExists = true;\n    }\n  }\n\n  if (!defaultCounterExists) {\n    console.warn('You provided wrong counter id as a default:', defaultCounter);\n  }\n  return defaultId;\n}\n\nexport function countersFactory(configs: CounterConfig | CounterConfig[]) {\n  return createConfigs(configs);\n}\n\nexport function createConfigs(configs: CounterConfig | CounterConfig[]) {\n  let counterConfigs: CounterConfig[];\n  if (configs instanceof Array) {\n    counterConfigs = configs;\n  } else {\n    counterConfigs = [configs as CounterConfig];\n  }\n  return counterConfigs.map((config: CounterConfig) => Object.assign(new YandexCounterConfig(), config));\n}\n\nexport function appInitializerFactory(counterConfigs: YandexCounterConfig[], platformId: any) {\n  if (!isPlatformBrowser(platformId)) {\n    return () => 'none';\n  }\n  counterConfigs.forEach(counterConfig => {\n    if (counterConfig.lazyConfigModifier !== undefined) {\n      counterConfig.lazyConfigModifier(counterConfig);\n    }\n  });\n  return insertMetrika.bind(null, counterConfigs);\n}\n\nexport function insertMetrika(counterConfigs: YandexCounterConfig[]) {\n  const name = 'yandex_metrika_callbacks2';\n  window[name] = window[name] || [];\n  window[name].push(() => {\n    try {\n      for (const config of counterConfigs) {\n        createCounter(config);\n      }\n    } catch (e) {}\n  });\n\n  const n = document.getElementsByTagName('script')[0];\n  const s = document.createElement('script');\n  s.type = 'text/javascript';\n  s.async = true;\n\n  const alternative = counterConfigs.find(config => config.alternative);\n\n  if (alternative) {\n    s.src = 'https://cdn.jsdelivr.net/npm/yandex-metrica-watch/tag.js';\n  } else {\n    s.src = 'https://mc.yandex.ru/metrika/tag.js';\n  }\n\n  const insetScriptTag = () => n.parentNode.insertBefore(s, n);\n\n  if ((window as any).opera === '[object Opera]') {\n    document.addEventListener('DOMContentLoaded', insetScriptTag, false);\n  } else {\n    insetScriptTag();\n  }\n  return name;\n}\n\nexport function createCounter(config: YandexCounterConfig) {\n  window[getCounterNameById(config.id)] = new Ya.Metrika2(config);\n}\n\nexport function getCounterNameById(id: string | number) {\n  return `yaCounter${id}`;\n}\n","import { APP_INITIALIZER, Injector, ModuleWithProviders, NgModule } from '@angular/core';\nimport { PLATFORM_ID } from '@angular/core';\n\nimport { Metrika } from './ng-yandex-metrika.service';\nimport {\n  CounterConfig,\n  DEFAULT_COUNTER_ID,\n  DEFAULT_COUNTER_ID_AOT,\n  YANDEX_COUNTERS_CONFIGS,\n  YANDEX_COUNTERS_CONFIGS_AOT,\n} from './ng-yandex-metrika.config';\nimport { appInitializerFactory, countersFactory, defaultCounterIdFactory, } from './ng-yandex-metrika-config-factories';\n\n@NgModule({})\nexport class MetrikaModule {\n\n  static forRoot(configs: CounterConfig | CounterConfig[], defaultCounterId?: number | string): ModuleWithProviders {\n    return {\n      ngModule: MetrikaModule,\n      providers: [\n        {\n          provide: DEFAULT_COUNTER_ID_AOT,\n          useValue: defaultCounterId,\n        },\n        {\n          provide: YANDEX_COUNTERS_CONFIGS_AOT,\n          useValue: configs,\n        },\n        {\n          provide: DEFAULT_COUNTER_ID,\n          useFactory: defaultCounterIdFactory,\n          deps: [YANDEX_COUNTERS_CONFIGS_AOT, DEFAULT_COUNTER_ID_AOT],\n        },\n        {\n          provide: YANDEX_COUNTERS_CONFIGS,\n          useFactory: countersFactory,\n          deps: [YANDEX_COUNTERS_CONFIGS_AOT],\n        },\n        {\n          provide: APP_INITIALIZER,\n          useFactory: appInitializerFactory,\n          deps: [YANDEX_COUNTERS_CONFIGS, PLATFORM_ID],\n          multi: true,\n        },\n        {\n          provide: Metrika,\n          useClass: Metrika,\n          deps: [Injector, PLATFORM_ID],\n        }\n      ],\n    };\n  }\n}\n"],"names":["tslib_1.__values"],"mappings":"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"}
